---
layout: single
title: About
permalink: /
sidebar:
  nav: "docs"
comments: true
---

Amaretti is a light-weight, cross-resource, multi-user task orchestration service written in nodejs. 

A user can make requests through RESTful API, and Amaretti will orchestrate the execution of tasks by determining which resource is used to run the task, staging input data, starting and monitoring tasks. User can also upload / download data generated by the execution. Amaretti is not a batch job scheduler and it should not be used as a replacement for one. Amaretti does not provide resource management, scheduling, and other capabilities often provided by various batch processing system. Amaretti only provides capability necessary to orchestrate cross-resource workflows while relying on  existing functionalities provided by local batch scheduler.

Any computer that allows ssh access through ssh keys can be used as a remote computing resources by Amaretti. Each user can register their own resource, or use shared resource owned by their group members or globally through the platform. User can create a logical workflow by specifying dependencies between tasks. Amaretti will handle concurrency, retry (on a different resource if necessary), data transfer between resources, and clean up of the task directories with the workflows.

Amaretti allows user to execute *apps* hosted on Github on resources where the user has access to. Application can be developed and registered by any 3rd party developer but it needs to be approved and enabled by each resource owner. Amaretti uses *hook* scripts as described by [ABCD specification](https://github.com/brain-life/abcd-spec) provided by each application or installed on compute resource to perform requested actions on each resources.

Amaretti is primarily used by Brain-Life.org project and design to meet its unique goals, but it can be installed and used independently for other projects. Amaretti itself does not provide all necessary features often required by science gateway applications. For example, Brain-Life portal uses Amaretti with various other services such as Authentication, Progress, Warehouse and Event services to provide all features required by the platform. 

We are releasing Amaretti as an independent open source project in a hope that other groups might find it useful. 

## Capabilities

### Task Orchestration

- Submits, monitors, and manages large number of tasks.
- Error tolerant. It can handle variety of error conditions and resume operations when systems recovers.
- Applications are hosted on github and maintained by individual developers.
- Git branch can be specified by users to run particular *versions* of the application.
- Handles task dependencies to form a workflow.
- Synchronizes input/output data if a task cross resource boundaries.
- Restart(retry) failed tasks if requested.
- Maximum runtime (retries) can be specified.
- Output from task execution can be removed at specified date.

### Resource Management

- Allows resource owners to decide which [ABCD compliant](https://github.com/brain-life/abcd-spec) applications to run.
- Resource can be shared by multiple users.
- Any computing resource that allows ssh access can be used as remote resource (HPC systems, VMs, clusters, etc..)
- Continuously monitor resource status and prevents apps from being submitted if no resources are available.
- Decides best resource to submit requested apps with preconfigured *scores* and user preference and current conditions.

### API

- RESTful APIs.
- Auth-e/o through JWT token. 
- Stateless (It can be installed across multiple nodes for scalability / high availability)
- Uploading / downloading of files to/from remote resources.

## Software Stack

Amaretti is implemented with following software.

- Node.js / express for REST API
- MongoDB (mongoose)
- RabbitMQ (amqp) to publish workflow events
- Redis for current status caching
- (optional) Angular1 based web UI for resource configuration

## License

MIT; A permissive free software license with very limited restriction on reuse and with an excellent license compatibility.
